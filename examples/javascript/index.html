<html>
<head>
    <script type="text/javascript" charset="utf-8" src="sola.js"></script>
    <script>
        window.start = function () {
            main();
            var renderer = window.rendererProvider.get(800, 600);

            renderer.clear();
            renderer.setPixel(5, 5, 0xffffffff);
            renderer.setPixel(6, 5, 0xff0000ff);
            renderer.setPixel(6, 6, 0xffff0000);
            renderer.setPixel(6, 7, 0xff00ff00);

            renderer.drawLine(20, 50, 20, 100, 0xffffffff);
            renderer.drawLine(50, 20, 100, 20, 0xffffffff);

            renderer.fillRect(100, 100, 60, 80, 0xff00ff00);
            renderer.drawRect(100, 100, 60, 80, 0xffff0000);

            renderer.drawRect(300, 150, 5, 5, 0xff00ff00);
            renderer.fillCircle(300, 150, 100.5, 0xff0000ff);
            renderer.drawCircle(300, 150, 100.5, 0xffff0000);

            /*
                TODO figure this out
                AssetLoader assetLoader = new AssetLoader();
                assetLoader.addAssetMapper(new SolaImageAssetMapper());
                assetLoader.addAsset("test_tiles", "test_tiles.png");
                SolaImage solaImage = assetLoader.getAsset("test_tiles", SolaImage.class);
                renderer.drawImage(400, 400, solaImage);
                renderer.drawImage(400, 530, solaImage.getSubImage(1, 1, 16, 16));

            */

            renderer.fillRect(180, 530, 50, 50, 0xff0000ff);
            renderer.setRenderMode(1);
            renderer.fillRect(210, 530, 50, 50, 0x96ff0000);
            renderer.setRenderMode(0);


            var data = renderer.render();

            var canvas = document.getElementById('test');
            var context = canvas.getContext('2d');
            var imageData = context.createImageData(800, 600);

            for (var i = 0; i < imageData.data.length; i++) {
              imageData.data[i] = data[i];
            }

            context.putImageData(imageData, 0, 0);
        };

    </script>
</head>
<body onload="start()">
<canvas id="test" width="800" height="600"></canvas>
</body>
</html>
